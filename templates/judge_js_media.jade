- load staticfiles
script(src='{% static "tablesorter.js" %}', type='text/javascript')
script(type='text/javascript').
    $(document).ready(function () {
        var table = $("#judge-status");
        table.tablesorter();

        var reinstalling = false;

        function install_tooltips() {
            $('.runtime-label').each(function () {
                var link = $(this);
                link.mouseenter(function (e) {
                    reinstalling = false;
                    console.log($(e.target));
                    $(e.target).addClass('tooltipped tooltipped-w').attr('aria-label', link.attr('data-runtime-info'));
                }).mouseleave(function (e) {
                    if (!reinstalling)
                        $(e.target).removeClass('tooltipped tooltipped-w').removeAttr('aria-label');
                });
            });
        }

        setInterval(function () {
            $.ajax({
                url: '{% url "status_table" %}'
            }).done(function (data) {
                reinstalling = true;
                table.html(data);
                install_tooltips();
            });
        }, 10000);

        install_tooltips();
    });

extends base

- load static from staticfiles
- load i18n

block js_media
    script(src='{% static "tablesorter.js" %}', type='text/javascript')
    script(type='text/javascript').
        $(document).ready(function () {
            var table = $("#judge-status");
            table.tablesorter();
            setInterval(function () {
                $.ajax({
                    url: '{% url "status_table" %}'
                }).done(function (data) {
                    table.html(data);
                });
            }, 10000);

            $('.runtime-label').each(function() {
                var link = $(this);
                link.mouseenter(function(e) {
                    $(e.target).addClass('tooltipped tooltipped-s').attr('aria-label', link.attr('data-runtime-info'));
                }).mouseleave(function(e) {
                    $(e.target).removeClass('tooltipped tooltipped-s').removeAttr('aria-label');
                });
            });
        });

block header
    if perms.judge.change_judge
        .title-line-action [#[a(href='{% url "admin:judge_judge_changelist" %}') {% trans "Admin" %}]]

block body
    p
        - blocktrans with name=SITE_NAME
            | This page shows the live status of {{ name }}'s judging servers.
    h3 {% trans "Judges" %}
    hr
    table#judge-status.table
        include judge_status_table
